import{u as v,h as N,a as F,r as o,j as e,N as k,C,i as S,b as L,F as q,k as u,L as E,e as h,f as O,g as R,M as A}from"./index-BE97Blc-.js";function D(){const f=v(),{resetId:p}=N(),g=F(s=>s.changePassword),[r,b]=o.useState({newPassword:"",confirmPassword:""}),[t,d]=o.useState({}),[i,c]=o.useState(!1),[n,m]=o.useState({isOpen:!1,type:"info",title:"",message:""}),x=(s,a,l)=>{m({isOpen:!0,type:s,title:a,message:l})},w=s=>{const{name:a,value:l}=s.target;b({...r,[a]:l}),t[a]&&d(y=>({...y,[a]:void 0}))},j=()=>{const s={};return r.newPassword?r.newPassword.length<8?s.newPassword="Password must be at least 8 characters":(!/[A-Z]/.test(r.newPassword)||!/[0-9]/.test(r.newPassword))&&(s.newPassword="Password must include uppercase letters and numbers"):s.newPassword="New password is required",r.newPassword!==r.confirmPassword&&(s.confirmPassword="Passwords do not match"),d(s),Object.keys(s).length===0},P=async s=>{if(s.preventDefault(),!!j()){c(!0);try{await g({newPassword:r.newPassword,resetId:p}),x("success","Password Reset","Your password has been successfully reset. You can now log in with your new password."),setTimeout(()=>f("/login"),3e3)}catch(a){console.error("Password reset error:",a),x("error","Reset Failed",a.response?.data?.message||"Failed to reset password. The link may be invalid or expired. Please request a new reset link.")}finally{c(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50 flex flex-col",children:[e.jsx(k,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:e.jsxs(C,{className:"w-full max-w-md shadow-2xl border-2 border-gray-200 rounded-2xl sm:rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white p-6 sm:p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(S,{className:"text-3xl sm:text-4xl"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-green-100 text-sm sm:text-base",children:"Enter your new password below"})]})}),e.jsxs(L,{className:"p-6 sm:p-8",children:[e.jsxs("form",{onSubmit:P,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-bold text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(q,{className:"text-gray-400"})}),e.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:r.newPassword,onChange:w,className:`w-full pl-10 pr-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-4 transition-all duration-200 ${t.newPassword?"border-red-500 focus:ring-red-200":"border-gray-300 focus:border-green-500 focus:ring-green-200"}`,placeholder:"Enter new password",required:!0})]}),t.newPassword&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"}),t.newPassword]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-bold text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(u,{className:"text-gray-400"})}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:w,className:`w-full pl-10 pr-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-4 transition-all duration-200 ${t.confirmPassword?"border-red-500 focus:ring-red-200":"border-gray-300 focus:border-green-500 focus:ring-green-200"}`,placeholder:"Confirm new password",required:!0})]}),t.confirmPassword&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"}),t.confirmPassword]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3",children:e.jsxs("p",{className:"text-xs text-gray-700 leading-relaxed",children:[e.jsx("strong",{children:"ðŸ”’ Password Requirements:"}),e.jsx("br",{}),"â€¢ At least 8 characters long",e.jsx("br",{}),"â€¢ Include uppercase letters",e.jsx("br",{}),"â€¢ Include numbers"]})}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 sm:py-4 px-6 rounded-xl hover:from-green-700 hover:to-blue-700 transition-all duration-200 font-bold text-base sm:text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(E,{size:"sm",color:"white",type:"dots"}),e.jsx("span",{children:"Setting New Password..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsx("span",{children:"Set New Password"})]})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t-2 border-gray-200 space-y-3 text-center",children:[e.jsxs(h,{to:"/login",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-bold hover:underline transition-colors",children:[e.jsx(O,{}),e.jsx("span",{children:"Back to Login"})]}),e.jsx("div",{children:e.jsx(h,{to:"/forgot-password",className:"text-sm text-gray-600 hover:text-blue-600 font-semibold hover:underline transition-colors",children:"Request a new reset link"})})]})]})]})}),e.jsx(R,{}),e.jsx(A,{isOpen:n.isOpen,onClose:()=>m({...n,isOpen:!1}),type:n.type,title:n.title,children:n.message})]})}export{D as default};
