import{a as M,r as i,j as e,z as b,A as w,p,B as h,k as a,N as R,o as f,C,b as k,s as O,D as P,L as T,t as V,E as j,G as S,g as z,M as B}from"./index-BE97Blc-.js";function J(){const{user:x,getUsers:U,changeUserRole:F}=M(),[d,A]=i.useState([]),[$,u]=i.useState(!0),[n,N]=i.useState({isOpen:!1,type:"info",title:"",message:""}),[l,y]=i.useState(null);i.useEffect(()=>{c()},[]);const c=async()=>{try{u(!0);const s=await U();A(s.users)}catch{m("error","Error","Failed to fetch users. Please try again.")}finally{u(!1)}},m=(s,t,g)=>{N({isOpen:!0,type:s,title:t,message:g})},r=async(s,t,g)=>{try{y(s),await F({userId:s,newRole:t}),await c(),m("success","Success",`Successfully changed ${g}'s role to ${t}.`)}catch(E){m("error","Error",E.response?.data?.message||"Failed to change role.")}finally{y(null)}},o=d.reduce((s,t)=>(s[t.role]=(s[t.role]||0)+1,t.verified?s.verified++:s.unverified++,s),{admin:0,instructor:0,student:0,verified:0,unverified:0}),v=s=>{switch(s){case"admin":return"bg-red-100 text-red-800 border-red-200";case"instructor":return"bg-blue-100 text-blue-800 border-blue-200";case"student":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=[{value:d.length,label:"Total Users",icon:e.jsx(b,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{value:o.admin,label:"Admins",icon:e.jsx(w,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"},{value:o.instructor,label:"Instructors",icon:e.jsx(p,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},{value:o.student,label:"Students",icon:e.jsx(h,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},{value:o.verified,label:"Verified",icon:e.jsx(a,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:[e.jsx(R,{}),e.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-10",children:[e.jsx("div",{className:"mb-8 sm:mb-10",children:e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-purple-600 rounded-2xl sm:rounded-3xl p-6 sm:p-8 lg:p-10 shadow-2xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-3 flex items-center gap-3",children:[e.jsx(f,{className:"text-yellow-300"}),"Admin Dashboard"]}),e.jsxs("p",{className:"text-red-100 text-sm sm:text-base lg:text-lg",children:["Welcome back, ",x?.name,"! Manage your platform and oversee all operations."]})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-4 lg:p-6",children:[e.jsx(b,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-2"}),e.jsxs("p",{className:"text-xs lg:text-sm font-semibold text-center",children:[d.length," Total Users"]})]})})]})})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 lg:gap-6 mb-8 sm:mb-10",children:L.map((s,t)=>e.jsx(C,{className:`border-2 ${s.borderColor} hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1`,children:e.jsx(k,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`${s.bgColor} ${s.color} p-3 sm:p-4 rounded-2xl mb-3 sm:mb-4`,children:s.icon}),e.jsx("div",{className:`text-2xl sm:text-3xl lg:text-4xl font-bold ${s.color} mb-1 sm:mb-2`,children:s.value}),e.jsx("div",{className:"text-gray-600 text-xs sm:text-sm font-medium",children:s.label})]})})},t))}),e.jsxs(C,{className:"shadow-2xl border-2 border-gray-200 rounded-2xl overflow-hidden",children:[e.jsx(O,{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 text-white border-b-2 border-blue-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold flex items-center gap-2",children:[e.jsx(b,{className:"text-xl sm:text-2xl"}),"All Users Management"]}),e.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm px-4 sm:px-5 py-2 sm:py-2.5 rounded-xl transition-all duration-300 font-semibold text-sm sm:text-base shadow-lg hover:shadow-xl",children:[e.jsx(P,{className:"animate-spin-on-hover"}),"Refresh"]})]})}),e.jsx(k,{className:"p-0",children:$?e.jsxs("div",{className:"text-center py-16 sm:py-20",children:[e.jsx(T,{size:"lg",type:"bars",color:"purple"}),e.jsx("p",{className:"text-gray-600 mt-4 text-sm sm:text-base",children:"Loading users..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto hidden lg:block",children:e.jsxs("table",{className:"min-w-full divide-y-2 divide-gray-200",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-100 to-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{}),"User"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{}),"Role"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{}),"Status"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{}),"Joined"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(s=>e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${s.role==="admin"?"bg-gradient-to-br from-red-500 to-red-600":s.role==="instructor"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-green-500 to-green-600"}`,children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold rounded-full border ${v(s.role)}`,children:[s.role==="admin"&&e.jsx(f,{className:"text-xs"}),s.role==="instructor"&&e.jsx(p,{className:"text-xs"}),s.role==="student"&&e.jsx(h,{className:"text-xs"}),s.role]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-full ${s.verified?"bg-green-100 text-green-800 border border-green-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:[s.verified?e.jsx(a,{}):e.jsx(S,{}),s.verified?"Verified":"Pending"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(j,{className:"text-gray-400"}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4",children:s.id!==x?.id&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.role!=="admin"&&e.jsx("button",{onClick:()=>r(s.id,"admin",s.name),disabled:l===s.id,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:l===s.id?"...":"→ Admin"}),s.role!=="instructor"&&e.jsx("button",{onClick:()=>r(s.id,"instructor",s.name),disabled:l===s.id,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:l===s.id?"...":"→ Instructor"}),s.role!=="student"&&e.jsx("button",{onClick:()=>r(s.id,"student",s.name),disabled:l===s.id,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 hover:bg-green-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:l===s.id?"...":"→ Student"})]})})]},s.id))})]})}),e.jsx("div",{className:"lg:hidden",children:d.map(s=>e.jsxs("div",{className:"border-b-2 border-gray-200 p-4 sm:p-5 hover:bg-blue-50/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-full flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-lg ${s.role==="admin"?"bg-gradient-to-br from-red-500 to-red-600":s.role==="instructor"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-green-500 to-green-600"}`,children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-base sm:text-lg mb-1",children:s.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:s.email}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 text-xs font-bold rounded-full border ${v(s.role)}`,children:[s.role==="admin"&&e.jsx(f,{className:"text-xs"}),s.role==="instructor"&&e.jsx(p,{className:"text-xs"}),s.role==="student"&&e.jsx(h,{className:"text-xs"}),s.role]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold rounded-full ${s.verified?"bg-green-100 text-green-800 border border-green-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:[s.verified?e.jsx(a,{}):e.jsx(S,{}),s.verified?"Verified":"Pending"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500 mb-4 pl-15",children:[e.jsx(j,{}),e.jsxs("span",{children:["Joined: ",new Date(s.created_at).toLocaleDateString()]})]}),s.id!==x?.id&&e.jsxs("div",{className:"flex flex-wrap gap-2 pl-15",children:[s.role!=="admin"&&e.jsx("button",{onClick:()=>r(s.id,"admin",s.name),disabled:l===s.id,className:"flex items-center gap-1 px-3 py-2 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:l===s.id?"...":"→ Admin"}),s.role!=="instructor"&&e.jsx("button",{onClick:()=>r(s.id,"instructor",s.name),disabled:l===s.id,className:"flex items-center gap-1 px-3 py-2 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:l===s.id?"...":"→ Instructor"}),s.role!=="student"&&e.jsx("button",{onClick:()=>r(s.id,"student",s.name),disabled:l===s.id,className:"flex items-center gap-1 px-3 py-2 bg-green-100 text-green-700 hover:bg-green-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:l===s.id?"...":"→ Student"})]})]},s.id))})]})})]})]}),e.jsx(z,{}),e.jsx(B,{isOpen:n.isOpen,onClose:()=>N({...n,isOpen:!1}),type:n.type,title:n.title,children:n.message})]})}export{J as default};
