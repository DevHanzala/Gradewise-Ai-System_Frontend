import{h as C,u as F,r as i,j as e,N as c,L as I,g as m,C as f,b as j,_ as P,e as o,s as D,X as O,z as L,$ as M,a0 as A,E,a1 as g,y as d,a2 as p,M as $,P as y}from"./index-BE97Blc-.js";import{u as S}from"./assessmentStore-CWi3OlGP.js";import{P as B}from"./PhysicalPaperModal-ZqGYt6D6.js";function U(){const{id:a}=C(),x=F(),{currentAssessment:t,getAssessmentById:u,loading:N,error:v}=S(),[l,w]=i.useState({isOpen:!1,type:"info",title:"",message:""}),[_,h]=i.useState(!0),[n,b]=i.useState({isOpen:!1,assessmentId:null,title:""});i.useEffect(()=>{(async()=>{h(!0);try{if(!a||isNaN(parseInt(a))){y.error("Invalid assessment ID"),x("/instructor/assessments");return}await u(parseInt(a))}catch(r){const q=r.response?.data?.message||r.message||"Failed to load assessment";y.error(q),r.response?.status===404&&x("/instructor/assessments")}finally{h(!1)}})()},[a,u,x]);const k=s=>{b({isOpen:!0,assessmentId:s.id,title:s.title})};return _||N?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(c,{}),e.jsxs("div",{className:"flex flex-col justify-center items-center py-32",children:[e.jsx(I,{size:"lg",type:"spinner",color:"blue"}),e.jsx("span",{className:"mt-4 text-gray-600 font-medium",children:"Loading assessment..."})]}),e.jsx(m,{})]}):v||!t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(c,{}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16",children:e.jsx(f,{className:"shadow-lg border-0",children:e.jsxs(j,{className:"text-center py-16",children:[e.jsx(P,{className:"mx-auto text-7xl text-red-500 mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Assessment Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"The requested assessment could not be loaded. It may have been deleted or you don't have access to it."}),e.jsx(o,{to:"/instructor/assessments",className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-md hover:shadow-lg",children:"â† Back to Assessments"})]})})}),e.jsx(m,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(c,{}),e.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 xl:px-10 py-8 sm:py-12 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx(o,{to:"/instructor/assessments",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1 transition-colors duration-200",children:"â† Back"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Assessment Details"}),e.jsx("p",{className:"text-gray-600",children:"View and manage this assessment"})]}),e.jsxs(f,{className:"shadow-lg border-0 overflow-hidden",children:[e.jsx(D,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2 break-words",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.jsx("span",{className:`px-3 py-1 rounded-full font-semibold ${t.is_executed?"bg-green-500 bg-opacity-30":"bg-yellow-500 bg-opacity-30"}`,children:t.is_executed?"âœ“ Executed":"ðŸ“ Draft"}),e.jsx("span",{className:`px-3 py-1 rounded-full font-semibold ${t.is_published?"bg-blue-500 bg-opacity-30":"bg-gray-500 bg-opacity-30"}`,children:t.is_published?"ðŸŒ Published":"ðŸ”’ Unpublished"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[!t.is_executed&&e.jsxs(o,{to:`/instructor/assessments/${a}/edit`,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all duration-200 font-semibold backdrop-blur-sm",children:[e.jsx(O,{})," Edit"]}),e.jsxs(o,{to:`/instructor/assessments/${a}/enroll`,className:"flex items-center gap-2  px-4 py-2.5 rounded-lg transition-all duration-200 font-semibold backdrop-blur-sm",children:[e.jsx(L,{})," Students"]}),e.jsxs("button",{onClick:()=>k(t),className:"flex items-center gap-2  px-4 py-2.5 rounded-lg transition-all duration-200 font-semibold backdrop-blur-sm",children:[e.jsx(M,{})," Print PDF"]})]})]})}),e.jsxs(j,{className:"p-6 sm:p-8 space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-5 text-gray-900",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"text-blue-600 text-lg"})}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 p-5 rounded-xl border-2 border-gray-200 hover:border-blue-300 transition-colors duration-200",children:[e.jsx("span",{className:"font-semibold text-gray-600 uppercase text-xs tracking-wide",children:"Title"}),e.jsx("p",{className:"mt-2 font-semibold text-gray-900 text-base",children:t.title})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 p-5 rounded-xl border-2 border-gray-200 hover:border-blue-300 transition-colors duration-200",children:[e.jsx("span",{className:"font-semibold text-gray-600 uppercase text-xs tracking-wide",children:"Prompt"}),e.jsx("p",{className:"mt-2 text-gray-900",children:t.prompt||"â€”"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-5 text-gray-900",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center",children:e.jsx(E,{className:"text-green-600 text-lg"})}),"Dates"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-green-50 p-5 rounded-xl border-2 border-gray-200 hover:border-green-300 transition-colors duration-200",children:[e.jsx("span",{className:"font-semibold text-gray-600 uppercase text-xs tracking-wide",children:"Created"}),e.jsx("p",{className:"mt-2 text-gray-900 font-medium",children:new Date(t.created_at).toLocaleString()})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-green-50 p-5 rounded-xl border-2 border-gray-200 hover:border-green-300 transition-colors duration-200",children:[e.jsx("span",{className:"font-semibold text-gray-600 uppercase text-xs tracking-wide",children:"Updated"}),e.jsx("p",{className:"mt-2 text-gray-900 font-medium",children:t.updated_at?new Date(t.updated_at).toLocaleString():"â€”"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-5 text-gray-900",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"text-purple-600 text-lg"})}),"External Links"]}),t.external_links?.length>0?e.jsx("div",{className:"space-y-3",children:t.external_links.map((s,r)=>e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border-2 border-purple-200 hover:border-purple-400 rounded-xl transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-purple-200 transition-colors duration-200",children:e.jsx(g,{className:"text-purple-600 text-sm"})}),e.jsx("span",{className:"text-blue-600 hover:text-blue-800 font-medium text-sm break-all flex-1",children:s}),e.jsx("span",{className:"text-gray-400 group-hover:text-gray-600 transition-colors duration-200",children:"â†’"})]},r))}):e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[e.jsx(g,{className:"mx-auto text-4xl text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500 italic",children:"No external links"})]})]}),e.jsxs("section",{className:"hidden lg:block",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-5 text-gray-900",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-100 to-indigo-200 rounded-lg flex items-center justify-center",children:e.jsx(d,{className:"text-indigo-600 text-lg"})}),"Question Blocks"]}),t.question_blocks?.length>0?e.jsx("div",{className:"overflow-hidden rounded-xl border-2 border-gray-200 shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gradient-to-r from-indigo-50 to-purple-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Count"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Time/Q"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Options"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"+Marks"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"-Marks"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:t.question_blocks.map((s,r)=>e.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-semibold",children:s.question_type})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:s.question_count}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[s.duration_per_question,"s"]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.question_type==="multiple_choice"?s.num_options:s.question_type==="matching"?`${s.num_first_side}/${s.num_second_side}`:"â€”"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded font-semibold",children:s.positive_marks??"â€”"})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded font-semibold",children:s.negative_marks??"â€”"})})]},r))})]})})}):e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[e.jsx(d,{className:"mx-auto text-4xl text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500 italic",children:"No question blocks"})]})]}),e.jsxs("section",{className:"lg:hidden space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-gray-900",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-100 to-indigo-200 rounded-lg flex items-center justify-center",children:e.jsx(d,{className:"text-indigo-600 text-lg"})}),"Question Blocks"]}),t.question_blocks?.length>0?t.question_blocks.map((s,r)=>e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-5 border-2 border-indigo-200 hover:border-indigo-400 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"bg-indigo-600 text-white px-3 py-1 rounded-full text-xs font-bold",children:["Block ",r+1]}),e.jsx("span",{className:"bg-white px-3 py-1 rounded-full text-xs font-bold text-indigo-600 border border-indigo-200",children:s.question_type})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-600 text-xs uppercase",children:"Count:"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:s.question_count})]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-600 text-xs uppercase",children:"Time/Q:"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:[s.duration_per_question,"s"]})]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-600 text-xs uppercase",children:"Options:"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:s.question_type==="multiple_choice"?s.num_options:s.question_type==="matching"?`${s.num_first_side}/${s.num_second_side}`:"â€”"})]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-gray-600 text-xs uppercase",children:"+/-Marks:"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:[e.jsxs("span",{className:"text-green-600",children:["+",s.positive_marks??"â€”"]})," /",e.jsxs("span",{className:"text-red-600 ml-1",children:["-",s.negative_marks??"â€”"]})]})]})]})]},r)):e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[e.jsx(d,{className:"mx-auto text-4xl text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500 italic",children:"No question blocks"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-5 text-gray-900",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg flex items-center justify-center",children:e.jsx(p,{className:"text-orange-600 text-lg"})}),"Resources"]}),t.resources?.length>0?e.jsx("div",{className:"space-y-3",children:t.resources.map((s,r)=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 bg-gradient-to-r from-orange-50 to-yellow-50 p-5 rounded-xl border-2 border-orange-200 hover:border-orange-400 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(p,{className:"text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600 bg-orange-100 inline-block px-2 py-0.5 rounded mt-1 font-medium",children:s.file_type})]})]}),e.jsx("a",{href:s.file_path,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-orange-600 text-white hover:bg-orange-700 rounded-lg transition-colors duration-200 font-semibold text-sm whitespace-nowrap",children:"View/Download"})]},r))}):e.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[e.jsx(p,{className:"mx-auto text-4xl text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500 italic",children:"No resources attached"})]})]})]})]})]}),e.jsx(m,{}),e.jsx(B,{isOpen:n.isOpen,onClose:()=>b({...n,isOpen:!1}),assessmentId:n.assessmentId,assessmentTitle:n.title}),e.jsx($,{isOpen:l.isOpen,onClose:()=>w({...l,isOpen:!1}),type:l.type,title:l.title,children:l.message})]})}export{U as default};
