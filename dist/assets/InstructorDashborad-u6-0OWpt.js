import{K as R,O as V,P as y,u as B,a as z,r as c,j as e,Q as x,R as F,S as h,N as T,E as p,L as Y,C as u,b,s as S,T as $,e as a,U as f,V as D,W as E,X as O,J as M,Y as P,g as G,M as Q,B as W,Z as q}from"./index-BE97Blc-.js";import{u as j}from"./assessmentStore-CWi3OlGP.js";import{P as H}from"./PhysicalPaperModal-ZqGYt6D6.js";const J="https://gradeadmin.techmiresolutions.com/api",K=R(o=>({overview:{assessments:0,executedAssessments:0,resources:0},loading:!1,error:null,getInstructorOverview:async()=>{o({loading:!0,error:null});try{const l=localStorage.getItem("token");if(!l)throw new Error("No authentication token found");const t=await V.get(`${J}/dashboard`,{headers:{Authorization:`Bearer ${l}`}});if(t.data.success)o({overview:t.data.data,loading:!1});else throw new Error(t.data.message||"Failed to fetch overview")}catch(l){const t=l.response?.data?.message||l.message||"Failed to fetch overview";throw console.error("âŒ Get dashboard overview error:",l),o({error:t,loading:!1}),y.error(t),l}},clearError:()=>o({error:null})}));function se(){const o=B(),{user:l}=z(),{assessments:t,getInstructorAssessments:N}=j(),{overview:m,loading:I,getInstructorOverview:w}=K(),[n,g]=c.useState({isOpen:!1,type:"info",title:"",message:""}),[L,v]=c.useState(!0),[d,k]=c.useState({isOpen:!1,assessmentId:null,title:""});c.useEffect(()=>{(async()=>{v(!0);try{await Promise.all([N(),w()])}catch(r){console.error("Failed to fetch dashboard data:",r);const i=r.response?.data?.message||r.message||"Failed to fetch dashboard data.";g({isOpen:!0,type:"error",title:"Error",message:i}),y.error(i),(r.response?.status===403||r.message==="No authentication token found")&&o("/login")}finally{v(!1)}})()},[N,w,o]);const A=(s,r,i)=>{g({isOpen:!0,type:s,title:r,message:i}),y[s==="success"?"success":"error"](i)},C=s=>{k({isOpen:!0,assessmentId:s.id,title:s.title})},_=[{title:"Create Assessment",description:"Add a new assessment",icon:e.jsx(f,{className:"w-7 h-7"}),link:"/instructor/assessments/create",color:"bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",shadow:"shadow-blue-200"},{title:"Manage Resources",description:"Upload or manage resources",icon:e.jsx(F,{className:"w-7 h-7"}),link:"/instructor/resources",color:"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",shadow:"shadow-green-200"},{title:"My Assessments",description:"View & manage assessments",icon:e.jsx($,{className:"w-7 h-7"}),link:"/instructor/assessments",color:"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",shadow:"shadow-purple-200"},{title:"Add New Student",description:"Register a new student",icon:e.jsx(W,{className:"w-7 h-7"}),link:"/instructor/students",color:"bg-gradient-to-br from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700",shadow:"shadow-yellow-200"},{title:"View Analytics",description:"Analyze performance",icon:e.jsx(q,{className:"w-7 h-7"}),link:"/instructor/assessments/:assessmentId/analytics",color:"bg-gradient-to-br from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700",shadow:"shadow-indigo-200"}],U=[{value:m.assessments||0,label:"My Assessments",icon:e.jsx(x,{className:"w-8 h-8"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{value:m.resources||0,label:"Resources",icon:e.jsx(F,{className:"w-8 h-8"}),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},{value:m.executedAssessments||0,label:"Executed Assessments",icon:e.jsx(h,{className:"w-8 h-8"}),color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:[e.jsx(T,{}),e.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-10",children:[e.jsx("div",{className:"mb-8 sm:mb-10",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl sm:rounded-3xl p-6 sm:p-8 lg:p-10 shadow-2xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-3",children:["Welcome Back, ",l?.name,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-blue-100 text-sm sm:text-base lg:text-lg",children:"Manage your assessments, track student progress, and create engaging learning experiences."})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-4 lg:p-6",children:[e.jsx(p,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-2"}),e.jsx("p",{className:"text-xs lg:text-sm font-semibold text-center",children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})})]})})}),L||I?e.jsx("div",{className:"flex justify-center items-center h-64 sm:h-80",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{size:"lg",color:"purple",type:"dots"}),e.jsx("span",{className:"ml-3 text-gray-600 text-sm sm:text-base",children:"Loading dashboard data..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8 sm:mb-10",children:U.map((s,r)=>e.jsx(u,{className:`border-2 ${s.borderColor} hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1`,children:e.jsx(b,{className:"p-6 sm:p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-3xl sm:text-4xl lg:text-5xl font-bold ${s.color} mb-2`,children:s.value}),e.jsx("div",{className:"text-gray-600 text-sm sm:text-base font-medium",children:s.label})]}),e.jsx("div",{className:`${s.bgColor} ${s.color} p-4 sm:p-5 rounded-2xl`,children:s.icon})]})})},r))}),e.jsxs(u,{className:"mb-8 sm:mb-10 border-2 border-gray-200 shadow-lg",children:[e.jsx(S,{className:"border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50/50",children:e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{className:"bg-blue-600 text-white p-2 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})}),"Quick Actions"]})}),e.jsx(b,{className:"p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4 lg:gap-6",children:_.map((s,r)=>e.jsxs(a,{to:s.link,className:`${s.color} text-white p-4 sm:p-6 lg:p-8 rounded-xl sm:rounded-2xl transition-all duration-300 shadow-lg hover:shadow-2xl ${s.shadow} transform hover:-translate-y-2 text-center group`,children:[e.jsx("div",{className:"flex justify-center mb-3 sm:mb-4 transform group-hover:scale-110 transition-transform duration-300",children:s.icon}),e.jsx("h3",{className:"font-bold text-sm sm:text-base lg:text-lg mb-1",children:s.title}),e.jsx("p",{className:"text-xs sm:text-sm opacity-90",children:s.description})]},r))})})]}),e.jsxs(u,{className:"border-2 border-gray-200 shadow-lg",children:[e.jsx(S,{className:"border-b border-gray-200 bg-gradient-to-r from-gray-50 to-purple-50/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-lg",children:e.jsx(x,{className:"w-5 h-5"})}),"Recent Assessments"]}),e.jsxs(a,{to:"/instructor/assessments",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-semibold text-sm sm:text-base transition-colors group",children:["View All",e.jsx("span",{className:"transform group-hover:translate-x-1 transition-transform",children:"â†’"})]})]})}),e.jsx(b,{className:"p-4 sm:p-6 lg:p-8",children:!t||t.length===0?e.jsxs("div",{className:"text-center py-12 sm:py-16 lg:py-20",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-purple-100 w-24 h-24 sm:w-28 sm:h-28 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(f,{className:"text-4xl sm:text-5xl text-blue-600"})}),e.jsx("h3",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-3",children:"No Assessments Yet"}),e.jsx("p",{className:"text-gray-600 mb-6 sm:mb-8 text-sm sm:text-base max-w-md mx-auto px-4",children:"Create your first assessment to start evaluating your students' progress and performance."}),e.jsxs(a,{to:"/instructor/assessments/create",className:"inline-flex items-center gap-2 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-base sm:text-lg font-semibold rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[e.jsx(f,{}),"Create Your First Assessment"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto rounded-xl border-2 border-gray-200 shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-100 to-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:"Assessment Title"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:"Created On"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.slice(0,5).map(s=>e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:e.jsx(x,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.title})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"text-gray-400"}),new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${s.is_executed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.is_executed?"Executed":"Draft"})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(a,{to:`/instructor/assessments/${s.id}`,className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 font-semibold hover:underline transition",children:[e.jsx(D,{}),"View"]}),e.jsxs(a,{to:`/instructor/assessments/${s.id}/enroll`,className:"inline-flex items-center gap-1 text-green-600 hover:text-green-800 font-semibold hover:underline transition",children:[e.jsx(E,{}),"Enroll"]}),!s.is_executed&&e.jsxs(a,{to:`/instructor/assessments/${s.id}/edit`,className:"inline-flex items-center gap-1 text-indigo-600 hover:text-indigo-800 font-semibold hover:underline transition",children:[e.jsx(O,{}),"Edit"]}),!s.is_executed&&e.jsxs("button",{onClick:()=>{window.confirm(`Delete "${s.title}"?`)&&j.getState().deleteAssessment(s.id).then(()=>A("success","Deleted!","Assessment removed successfully")).catch(()=>A("error","Error","Failed to delete"))},className:"inline-flex items-center gap-1 text-red-600 hover:text-red-800 font-semibold hover:underline transition",children:[e.jsx(M,{}),"Delete"]}),s.is_executed&&e.jsxs(a,{to:`/instructor/assessments/${s.id}/analytics`,className:"inline-flex items-center gap-1 text-purple-600 hover:text-purple-800 font-semibold hover:underline transition",children:[e.jsx(h,{}),"Analytics"]}),e.jsxs("button",{onClick:()=>C(s),className:"inline-flex items-center gap-1 text-orange-600 hover:text-orange-800 font-semibold hover:underline transition",children:[e.jsx(P,{}),"Paper"]})]})})]},s.id))})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:t.slice(0,5).map(s=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-2xl p-4 sm:p-6 shadow-md hover:shadow-xl transition-all duration-300 hover:border-blue-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 sm:p-3 rounded-xl flex-shrink-0",children:e.jsx(x,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-1 break-words",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[e.jsx(p,{}),new Date(s.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),e.jsx("span",{className:`inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap flex-shrink-0 ${s.is_executed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.is_executed?"Executed":"Draft"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 text-sm",children:[e.jsxs(a,{to:`/instructor/assessments/${s.id}`,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-blue-100 text-blue-700 rounded-lg sm:rounded-xl font-semibold hover:bg-blue-200 transition-colors",children:[e.jsx(D,{}),e.jsx("span",{className:"hidden xs:inline",children:"View"})]}),e.jsxs(a,{to:`/instructor/assessments/${s.id}/enroll`,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-green-100 text-green-700 rounded-lg sm:rounded-xl font-semibold hover:bg-green-200 transition-colors",children:[e.jsx(E,{}),e.jsx("span",{className:"hidden xs:inline",children:"Enroll"})]}),!s.is_executed&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{to:`/instructor/assessments/${s.id}/edit`,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-indigo-100 text-indigo-700 rounded-lg sm:rounded-xl font-semibold hover:bg-indigo-200 transition-colors",children:[e.jsx(O,{}),e.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),e.jsxs("button",{onClick:()=>window.confirm(`Delete "${s.title}"?`)&&j.getState().deleteAssessment(s.id),className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-red-100 text-red-700 rounded-lg sm:rounded-xl font-semibold hover:bg-red-200 transition-colors",children:[e.jsx(M,{}),e.jsx("span",{className:"hidden xs:inline",children:"Delete"})]})]}),s.is_executed&&e.jsxs(a,{to:`/instructor/assessments/${s.id}/analytics`,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-purple-100 text-purple-700 rounded-lg sm:rounded-xl font-semibold hover:bg-purple-200 transition-colors",children:[e.jsx(h,{}),e.jsx("span",{className:"hidden xs:inline",children:"Analytics"})]}),e.jsxs("button",{onClick:()=>C(s),className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-orange-100 text-orange-700 rounded-lg sm:rounded-xl font-semibold hover:bg-orange-200 transition-colors col-span-2",children:[e.jsx(P,{}),"Physical Paper"]})]})]},s.id))})]})})]})]})]}),e.jsx(G,{}),e.jsx(H,{isOpen:d.isOpen,onClose:()=>k({...d,isOpen:!1}),assessmentId:d.assessmentId,assessmentTitle:d.title}),e.jsx(Q,{isOpen:n.isOpen,onClose:()=>g({...n,isOpen:!1}),type:n.type,title:n.title,children:n.message})]})}export{se as default};
