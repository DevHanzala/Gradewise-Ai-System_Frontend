import{r as d,j as e,N,e as t,C as l,b as i,L as w,s as v,g as k,M as C,P as L}from"./index-BE97Blc-.js";import{u as A}from"./assessmentStore-CWi3OlGP.js";function D(){const{assessments:g,loading:b,getInstructorAssessments:c,deleteAssessment:f}=A(),[r,h]=d.useState({isOpen:!1,type:"info",title:"",message:""}),[a,j]=d.useState(""),[y,u]=d.useState(!0);d.useEffect(()=>{(async()=>{u(!0);try{await c()}catch{x("error","Error","Failed to fetch assessments. Please try again.")}finally{u(!1)}})()},[c]);const x=(s,o,m)=>{h({isOpen:!0,type:s,title:o,message:m}),L[s==="success"?"success":"error"](m)},p=async(s,o)=>{if(window.confirm(`Are you sure you want to delete "${o}"?`))try{await f(s),x("success","Success","Assessment deleted successfully!"),await c()}catch{x("error","Error","Failed to delete assessment.")}},n=g?.filter(s=>s&&s.id&&s.title?.toLowerCase().includes(a.toLowerCase()))||[];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(N,{}),e.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 xl:px-10 py-8 sm:py-12",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"My Assessments"}),e.jsx("p",{className:"text-gray-600",children:"Manage and view all your assessments"})]}),e.jsxs(t,{to:"/instructor/assessments/create",className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg text-sm font-semibold flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"+"}),e.jsx("span",{children:"Create Assessment"})]})]}),e.jsx(l,{className:"mb-6 shadow-md border-0",children:e.jsx(i,{className:"p-5",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search assessments by title...",value:a,onChange:s=>j(s.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 text-sm"})]})})}),y||b?e.jsx(l,{className:"shadow-md border-0",children:e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[e.jsx(w,{size:"lg",type:"spinner",color:"blue"}),e.jsx("span",{className:"mt-4 text-gray-600 font-medium",children:"Loading assessments..."})]})})}):n.length===0?e.jsx(l,{className:"shadow-md border-0",children:e.jsxs(i,{className:"text-center py-20",children:[e.jsx("div",{className:"text-7xl mb-6",children:"ðŸ“"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:a?"No assessments found":"No assessments yet"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:a?"Try a different search term or clear your search":"Start by creating your first assessment to get started"}),!a&&e.jsxs(t,{to:"/instructor/assessments/create",className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-md hover:shadow-lg",children:[e.jsx("span",{className:"text-xl",children:"+"}),e.jsx("span",{children:"Create Your First Assessment"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs(l,{className:"shadow-md border-0 overflow-hidden",children:[e.jsx(v,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b-2 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"All Assessments"}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-sm font-semibold",children:[n.length," ",n.length===1?"Assessment":"Assessments"]})]})}),e.jsx(i,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Questions"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider pr-8",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:n.map(s=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"ðŸ“„"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.title})]})}),e.jsx("td",{className:"px-6 py-5 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-5 text-sm",children:e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full font-medium text-xs",children:[s.question_blocks?.length||0," blocks"]})}),e.jsxs("td",{className:"px-6 py-5 text-right text-sm font-medium space-x-1",children:[e.jsx(t,{to:`/instructor/assessments/${s.id}`,className:"inline-flex items-center px-3 py-1.5 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors duration-150 font-medium",children:"ðŸ‘ï¸ View"}),!s.is_executed&&e.jsx(t,{to:`/instructor/assessments/${s.id}/edit`,className:"inline-flex items-center px-3 py-1.5 bg-green-50 text-green-600 hover:bg-green-100 rounded-lg transition-colors duration-150 font-medium",children:"âœï¸ Edit"}),e.jsx("button",{onClick:()=>p(s.id,s.title),className:"inline-flex items-center px-3 py-1.5 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors duration-150 font-medium",children:"ðŸ—‘ï¸ Delete"})]})]},s.id))})]})})})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:n.map(s=>e.jsx(l,{className:"shadow-md hover:shadow-lg transition-all duration-200 border-0 overflow-hidden",children:e.jsxs(i,{className:"p-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-5 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 flex-1 pr-2",children:s.title}),e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2.5 py-1 rounded-full font-semibold text-xs whitespace-nowrap",children:[s.question_blocks?.length||0," blocks"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("span",{children:["Created: ",new Date(s.created_at).toLocaleDateString()]})]})]}),e.jsx("div",{className:"px-5 py-4 bg-white",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(t,{to:`/instructor/assessments/${s.id}`,className:"flex-1 min-w-[120px] text-center px-4 py-2.5 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors duration-150 font-semibold text-sm",children:"ðŸ‘ï¸ View"}),!s.is_executed&&e.jsx(t,{to:`/instructor/assessments/${s.id}/edit`,className:"flex-1 min-w-[120px] text-center px-4 py-2.5 bg-green-50 text-green-600 hover:bg-green-100 rounded-lg transition-colors duration-150 font-semibold text-sm",children:"âœï¸ Edit"}),e.jsx("button",{onClick:()=>p(s.id,s.title),className:"flex-1 min-w-[120px] px-4 py-2.5 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors duration-150 font-semibold text-sm",children:"ðŸ—‘ï¸ Delete"})]})})]})},s.id))})]})]}),e.jsx(k,{}),e.jsx(C,{isOpen:r.isOpen,onClose:()=>h({...r,isOpen:!1}),type:r.type,title:r.title,children:r.message})]})}export{D as default};
