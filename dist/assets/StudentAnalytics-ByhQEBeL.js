import{r,j as e,L as C,n as _,N as $,Z as Q,C as x,G as k,b as i,ae as S,V as E,R as m,s as z,k as c,aa as I,g as M,O,P}from"./index-BE97Blc-.js";import{u as V}from"./useStudentAnalyticsStore-CyWanBkV.js";const G=()=>{const{assessments:p,selectedAssessment:a,selectedAssessmentDetails:l,loading:A,error:h,fetchAssessments:u,fetchAssessmentDetails:g,setSelectedAssessment:b,downloadReport:F}=V(),[n,f]=r.useState(null),[j,N]=r.useState([]),[R,y]=r.useState(!1),w=r.useRef(null),v=r.useRef(null);r.useEffect(()=>{u()},[u]),r.useEffect(()=>{a&&n==="results"&&(g(a),setTimeout(()=>w.current?.scrollIntoView({behavior:"smooth"}),300)),a&&n==="questions"&&setTimeout(()=>v.current?.scrollIntoView({behavior:"smooth"}),300)},[a,n,g]);const D=s=>{if(!s)return"0m 0s";const t=Math.floor(s/60),o=s%60;return`${t}m ${o}s`},L=s=>{b(s),f("results"),N([])},T=async s=>{b(s),f("questions"),y(!0);try{const t=localStorage.getItem("token"),o="https://gradeadmin.techmiresolutions.com/api",{data:d}=await O.get(`${o}/student-analytics/assessment/${s}/questions`,{headers:{Authorization:`Bearer ${t}`}});N(d.success?d.data:[])}catch{P.error("Failed to load questions")}finally{y(!1)}};return A?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{size:"lg",color:"purple",type:"gradient"}),e.jsx("p",{className:"mt-4 text-gray-600 font-semibold",children:"Loading analytics..."})]})}):h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-2xl border-2 border-red-200",children:[e.jsx(_,{className:"text-6xl text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-600",children:h})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:[e.jsx($,{}),e.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[e.jsx("div",{className:"mb-8 sm:mb-10",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl sm:rounded-3xl p-6 sm:p-8 shadow-2xl text-white text-center",children:[e.jsx(Q,{className:"text-4xl sm:text-5xl mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2",children:"My Analytics"}),e.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:"Review your performance and track your progress"})]})}),e.jsx("div",{className:"space-y-4 sm:space-y-6 max-w-5xl mx-auto",children:p.length>0?p.map(s=>e.jsxs(x,{className:`w-full shadow-xl hover:shadow-2xl transition-all duration-300 border-2 ${a===s.id?"border-indigo-500":"border-gray-200"}`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 sm:p-5 text-white rounded-t-xl",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-1",children:s.title}),e.jsxs("p",{className:"text-xs sm:text-sm opacity-90 flex items-center gap-2",children:[e.jsx(k,{}),new Date(s.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx(i,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("p",{className:"text-gray-600 font-semibold",children:"Click to review your answers and performance"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>L(s.id),className:"inline-flex items-center justify-center gap-2 px-5 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white font-bold rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(S,{}),e.jsx("span",{children:"Results"})]}),e.jsxs("button",{onClick:()=>T(s.id),className:"inline-flex items-center justify-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl",children:[e.jsx(E,{}),e.jsx("span",{children:"Questions"})]})]})]})})]},s.id)):e.jsxs("div",{className:"text-center py-16 sm:py-20 bg-white rounded-2xl shadow-xl border-2 border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-blue-100 w-24 h-24 sm:w-28 sm:h-28 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(m,{className:"text-5xl sm:text-6xl text-gray-400"})}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-700 mb-2",children:"No assessments completed yet"}),e.jsx("p",{className:"text-gray-500",children:"Complete assessments to see your analytics here"})]})}),n==="results"&&l&&e.jsxs("div",{ref:w,className:"mt-10 sm:mt-12 space-y-6 sm:space-y-8 max-w-5xl mx-auto",children:[e.jsxs(x,{className:"shadow-2xl border-2 border-gray-200",children:[e.jsx(z,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-center py-6 sm:py-8",children:e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:l.assessment_title})}),e.jsx(i,{className:"p-6 sm:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 text-center",children:[e.jsxs("div",{className:"p-6 sm:p-8 bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-2xl shadow-xl transform hover:scale-105 transition-transform",children:[e.jsx(S,{className:"text-4xl sm:text-5xl mx-auto mb-3"}),e.jsxs("p",{className:"text-4xl sm:text-5xl font-extrabold",children:[l.score,"%"]}),e.jsx("p",{className:"text-base sm:text-lg mt-2 font-semibold",children:"Score"})]}),e.jsxs("div",{className:"p-6 sm:p-8 bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-2xl shadow-xl transform hover:scale-105 transition-transform",children:[e.jsx(k,{className:"text-4xl sm:text-5xl mx-auto mb-3"}),e.jsx("p",{className:"text-3xl sm:text-4xl font-extrabold",children:D(l.time_taken)}),e.jsx("p",{className:"text-base sm:text-lg mt-2 font-semibold",children:"Time"})]}),e.jsxs("div",{className:"p-6 sm:p-8 bg-gradient-to-br from-purple-500 to-pink-600 text-white rounded-2xl shadow-xl transform hover:scale-105 transition-transform",children:[e.jsx(c,{className:"text-4xl sm:text-5xl mx-auto mb-3"}),e.jsxs("p",{className:"text-3xl sm:text-4xl font-extrabold",children:[l.correct_answers," / ",l.total_questions]}),e.jsx("p",{className:"text-base sm:text-lg mt-2 font-semibold",children:"Correct"})]})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>F(a),className:"inline-flex items-center gap-3 px-8 sm:px-12 py-4 sm:py-5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all text-base sm:text-lg shadow-2xl hover:shadow-indigo-500/50 transform hover:-translate-y-1",children:[e.jsx(I,{className:"text-xl"}),e.jsx("span",{children:"Download Full Report (PDF)"})]})})]}),n==="questions"&&e.jsx("div",{ref:v,className:"mt-10 sm:mt-12 space-y-6 sm:space-y-8 max-w-5xl mx-auto",children:R?e.jsx(x,{className:"shadow-xl",children:e.jsxs(i,{className:"py-16 sm:py-20 text-center",children:[e.jsx(C,{size:"lg",color:"blue",type:"dots"}),e.jsx("p",{className:"mt-4 text-gray-600 font-semibold",children:"Loading questions..."})]})}):j.length>0?j.map((s,t)=>e.jsxs(x,{className:"shadow-2xl border-2 border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white p-4 sm:p-5",children:e.jsxs("h3",{className:"text-base sm:text-lg lg:text-xl font-bold flex items-center gap-2",children:[e.jsx(m,{}),"Question ",s.question_order||t+1," (",s.type,")"]})}),e.jsxs(i,{className:"p-5 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 p-4 sm:p-5 rounded-xl",children:[e.jsx("p",{className:"font-bold text-blue-900 mb-2 text-sm sm:text-base",children:"Question:"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-800 leading-relaxed",children:s.question})]}),["multiple_choice","MCQ"].includes(s.type)&&s.options&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 p-4 sm:p-5 rounded-xl",children:[e.jsx("p",{className:"font-bold text-purple-900 mb-3 text-sm sm:text-base",children:"Options"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.options).map(([o,d])=>e.jsxs("div",{className:"bg-white border border-purple-200 p-3 rounded-lg text-gray-700 text-xs sm:text-sm",children:[e.jsxs("strong",{className:"text-purple-600",children:[o,":"]})," ",d]},o))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 p-5 sm:p-6 rounded-xl text-center",children:[e.jsx(c,{className:"text-3xl sm:text-4xl text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-bold text-green-900 text-sm sm:text-base",children:"Correct Answer"}),e.jsx("p",{className:"font-bold text-lg mt-2 text-green-700",children:s.type==="true_false"?s.correct_answer===!0||s.correct_answer==="true"?"True":"False":s.correct_answer||"N/A"})]}),e.jsxs("div",{className:`border-2 p-5 sm:p-6 rounded-xl text-center ${s.is_correct?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-gradient-to-br from-red-50 to-pink-50 border-red-200"}`,children:[s.is_correct?e.jsx(c,{className:"text-3xl sm:text-4xl text-green-600 mx-auto mb-2"}):e.jsx(_,{className:"text-3xl sm:text-4xl text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"font-bold text-gray-900 text-sm sm:text-base",children:"Your Answer"}),e.jsx("p",{className:`text-lg font-bold mt-2 ${s.is_correct?"text-green-600":"text-red-600"}`,children:s.type==="true_false"?s.student_answer===!0||s.student_answer==="true"?"True":"False":s.student_answer||"Not Answered"})]})]})]})]},t)):e.jsx(x,{className:"shadow-xl",children:e.jsxs(i,{className:"py-16 sm:py-20 text-center",children:[e.jsx(m,{className:"text-6xl sm:text-7xl text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg sm:text-xl text-gray-500 font-semibold",children:"No questions available"})]})})})]}),e.jsx(M,{})]})};export{G as default};
