import{h as f,r as i,j as e,N as b,C as h,s as g,b as p,L as v,g as S,M as w,P as E}from"./index-BE97Blc-.js";import{u as A}from"./assessmentStore-CWi3OlGP.js";import C from"./AddStudent-RnHYJcZT.js";function M(){const{assessmentId:t}=f(),{getEnrolledStudents:r,unenrollStudent:j,enrolledStudents:d,loading:u}=A(),[a,c]=i.useState({isOpen:!1,type:"info",title:"",message:""}),[y,o]=i.useState(!0);i.useEffect(()=>{(async()=>{o(!0);try{await r(t)}catch(l){n("error","Error",l.message||"Failed to load students")}finally{o(!1)}})()},[t,r]);const m=async s=>{try{await j(t,s),n("success","Success","Student removed"),await r(t)}catch(l){n("error","Error",l.message||"Failed to unenroll")}},N=()=>r(t),n=(s,l,x)=>{c({isOpen:!0,type:s,title:l,message:x}),E[s==="success"?"success":"error"](x)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(b,{}),e.jsxs("div",{className:"w-full mx-auto px-4 sm:px-4 lg:px-8 xl:px-10 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Enroll Students"}),e.jsx("p",{className:"text-gray-600",children:"Add or remove students from this assessment"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{className:"h-fit",children:[e.jsx(g,{className:"pb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Student"})}),e.jsx(p,{className:"pt-2",children:e.jsx(C,{compact:!0,assessmentId:t,onStudentAdded:N})})]}),e.jsxs(h,{className:"h-fit",children:[e.jsx(g,{className:"pb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Enrolled Students"})}),e.jsx(p,{className:"pt-2",children:y||u?e.jsxs("div",{className:"flex flex-col items-center py-12",children:[e.jsx(v,{size:"lg",color:"white",type:"spinner"}),e.jsx("p",{className:"mt-3 text-gray-600",children:"Loading..."})]}):d?.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ‘©â€ðŸŽ“"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students Enrolled"}),e.jsx("p",{className:"text-gray-600",children:"Add students using the form to the left."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-hidden rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pl-6 pr-3 text-left text-sm font-semibold text-gray-900",children:"Name"}),e.jsx("th",{className:"px-3 py-3 text-left text-sm font-semibold text-gray-900",children:"Email"}),e.jsx("th",{className:"pr-6 py-3 text-right text-sm font-semibold text-gray-900",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 pl-6 text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"py-4 text-sm text-gray-600",children:s.email}),e.jsx("td",{className:"py-4 pr-6 text-right",children:e.jsx("button",{onClick:()=>m(s.id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Unenroll"})})]},s.id))})]})}),e.jsx("div",{className:"lg:hidden space-y-3",children:d.map(s=>e.jsx("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email})]}),e.jsx("button",{onClick:()=>m(s.id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Unenroll"})]})},s.id))})]})})]})]})]}),e.jsx(S,{}),e.jsx(w,{isOpen:a.isOpen,onClose:()=>c({...a,isOpen:!1}),type:a.type,title:a.title,children:a.message})]})}export{M as default};
