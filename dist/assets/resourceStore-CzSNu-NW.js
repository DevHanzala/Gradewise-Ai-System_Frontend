import{K as d,O as t,P as n}from"./index-BE97Blc-.js";const l="https://gradeadmin.techmiresolutions.com/api",i=d(r=>({resources:[],currentResource:null,loading:!1,error:null,fetchResources:async()=>{r({loading:!0,error:null});try{const a=localStorage.getItem("token"),e=await t.get(`${l}/resources`,{headers:{Authorization:`Bearer ${a}`}});e.data.success?r({resources:e.data.data,loading:!1}):r({error:e.data.message,loading:!1})}catch(a){r({error:a.response?.data?.message||"Failed to fetch resources",loading:!1}),n.error(a.response?.data?.message||"Failed to fetch resources")}},fetchAllResources:async()=>{r({loading:!0,error:null});try{const a=localStorage.getItem("token"),e=await t.get(`${l}/resources/all`,{headers:{Authorization:`Bearer ${a}`}});e.data.success?r({resources:e.data.data,loading:!1}):r({error:e.data.message,loading:!1})}catch(a){r({error:a.response?.data?.message||"Failed to fetch system resources",loading:!1}),n.error(a.response?.data?.message||"Failed to fetch system resources")}},getResourceById:async a=>{r({loading:!0,error:null});try{const e=localStorage.getItem("token"),o=await t.get(`${l}/resources/${a}`,{headers:{Authorization:`Bearer ${e}`}});if(o.data.success)return r({currentResource:o.data.data,loading:!1}),o.data.data;throw new Error(o.data.message||"Failed to fetch resource")}catch(e){throw r({error:e.response?.data?.message||"Failed to fetch resource",loading:!1}),n.error(e.response?.data?.message||"Failed to fetch resource"),e}},uploadResources:async a=>{r({loading:!0,error:null});try{const e=localStorage.getItem("token"),o=new FormData;a.forEach(c=>o.append("files",c));const s=await t.post(`${l}/resources`,o,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}});if(s.data.success)return r({loading:!1}),s.data.resources;r({error:s.data.message,loading:!1})}catch(e){throw r({error:e.response?.data?.message||"Failed to upload resources",loading:!1}),e}},deleteResource:async a=>{r({loading:!0,error:null});try{const e=localStorage.getItem("token"),o=await t.delete(`${l}/resources/${a}`,{headers:{Authorization:`Bearer ${e}`}});o.data.success?r(s=>({resources:s.resources.filter(c=>c.id!==a),loading:!1})):r({error:o.data.message,loading:!1})}catch(e){throw r({error:e.response?.data?.message||"Failed to delete resource",loading:!1}),e}},clearError:()=>{r({error:null})},clearCurrentResource:()=>{r({currentResource:null})}}));export{i as u};
