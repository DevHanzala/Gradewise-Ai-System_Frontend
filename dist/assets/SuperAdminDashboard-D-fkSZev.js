import{a as V,r as i,j as e,z as b,A as F,p as h,B as j,k as g,N as Y,o as f,v as B,C as y,b as N,s as G,D as H,L as p,t as W,E as u,G as S,H as U,I as A,J as P,g as q,M as I}from"./index-BE97Blc-.js";function X(){const{user:L,getUsers:E,changeUserRole:R,deleteUser:z}=V(),[v,M]=i.useState([]),[O,w]=i.useState(!0),[d,C]=i.useState({isOpen:!1,type:"info",title:"",message:""}),[t,a]=i.useState(null);i.useEffect(()=>{o()},[]);const o=async()=>{try{w(!0);const s=await E();M(s.users)}catch{n("error","Error","Failed to fetch users. Please try again.")}finally{w(!1)}},n=(s,l,r)=>{C({isOpen:!0,type:s,title:l,message:r})},x=async(s,l,r,_)=>{try{a(`role-${s}`),await R({userId:s,newRole:l,userEmail:_}),await o(),n("success","Success",`Successfully changed ${r}'s role to ${l}.`)}catch(J){n("error","Error",`Failed to change user role. ${J.response?.data?.message||"Please try again."}`)}finally{a(null)}},$=async(s,l)=>{if(window.confirm(`Are you sure you want to delete ${l}? This action cannot be undone.`))try{a(`delete-${s}`),await z(s),await o(),n("success","Success",`Successfully deleted ${l}.`)}catch(r){n("error","Error",`Failed to delete user. ${r.response?.data?.message||"Please try again."}`)}finally{a(null)}},c=v.reduce((l,r)=>(l[r.role]=(l[r.role]||0)+1,l.verified+=r.verified?1:0,l.unverified+=r.verified?0:1,l),{admin:0,instructor:0,student:0,verified:0,unverified:0}),k=s=>{switch(s){case"super_admin":return"bg-purple-100 text-purple-800 border-purple-200";case"admin":return"bg-red-100 text-red-800 border-red-200";case"instructor":return"bg-blue-100 text-blue-800 border-blue-200";case"student":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=v.filter(s=>s.role!=="super_admin"),T=[{value:m.length,label:"Total Users",icon:e.jsx(b,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},{value:c.admin,label:"Admins",icon:e.jsx(F,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"},{value:c.instructor,label:"Instructors",icon:e.jsx(h,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{value:c.student,label:"Students",icon:e.jsx(j,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},{value:c.verified,label:"Verified",icon:e.jsx(g,{className:"w-6 h-6 sm:w-7 sm:h-7"}),color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-purple-50/30 to-blue-50/30",children:[e.jsx(Y,{}),e.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-10",children:[e.jsx("div",{className:"mb-8 sm:mb-10",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 rounded-2xl sm:rounded-3xl p-6 sm:p-8 lg:p-10 shadow-2xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-3 flex items-center gap-3",children:[e.jsx(f,{className:"text-yellow-300 animate-pulse"}),"Super Admin Dashboard"]}),e.jsxs("p",{className:"text-purple-100 text-sm sm:text-base lg:text-lg mb-4",children:["Welcome back, ",L?.name,"! You have full control over the platform."]}),e.jsx("div",{className:"bg-yellow-500/20 backdrop-blur-sm border border-yellow-400/30 rounded-xl p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx(B,{className:"text-yellow-300 text-lg sm:text-xl flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs sm:text-sm",children:[e.jsx("strong",{className:"block mb-1",children:"Role Permissions:"}),e.jsx("span",{className:"text-yellow-100",children:"You can promote students to admin or demote admins to student. You can delete admin users only."})]})]})})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-4 lg:p-6",children:[e.jsx(b,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-2"}),e.jsxs("p",{className:"text-xs lg:text-sm font-semibold text-center",children:[m.length," Users"]})]})})]})})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 lg:gap-6 mb-8 sm:mb-10",children:T.map((s,l)=>e.jsx(y,{className:`border-2 ${s.borderColor} hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1`,children:e.jsx(N,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`${s.bgColor} ${s.color} p-3 sm:p-4 rounded-2xl mb-3 sm:mb-4`,children:s.icon}),e.jsx("div",{className:`text-2xl sm:text-3xl lg:text-4xl font-bold ${s.color} mb-1 sm:mb-2`,children:s.value}),e.jsx("div",{className:"text-gray-600 text-xs sm:text-sm font-medium",children:s.label})]})})},l))}),e.jsxs(y,{className:"shadow-2xl border-2 border-gray-200 rounded-2xl overflow-hidden",children:[e.jsx(G,{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 text-white border-b-2 border-purple-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold flex items-center gap-2",children:[e.jsx(b,{className:"text-xl sm:text-2xl"}),"Platform Users Management"]}),e.jsxs("button",{onClick:o,className:"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm px-4 sm:px-5 py-2 sm:py-2.5 rounded-xl transition-all duration-300 font-semibold text-sm sm:text-base shadow-lg hover:shadow-xl",children:[e.jsx(H,{className:"animate-spin-on-hover"}),"Refresh"]})]})}),e.jsx(N,{className:"p-0",children:O?e.jsxs("div",{className:"text-center py-16 sm:py-20",children:[e.jsx(p,{size:"lg",type:"bars",color:"purple"}),e.jsx("p",{className:"text-gray-600 mt-4 text-sm sm:text-base",children:"Loading users..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto hidden lg:block",children:e.jsxs("table",{className:"w-full divide-y-2 divide-gray-200",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-100 to-purple-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{}),"User"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{}),"Role"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{}),"Status"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{}),"Joined"]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(s=>e.jsxs("tr",{className:"hover:bg-purple-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-lg ${s.role==="admin"?"bg-gradient-to-br from-red-500 to-red-600":s.role==="instructor"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-green-500 to-green-600"}`,children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold rounded-full border ${k(s.role)}`,children:[s.role==="admin"&&e.jsx(f,{className:"text-xs"}),s.role==="instructor"&&e.jsx(h,{className:"text-xs"}),s.role==="student"&&e.jsx(j,{className:"text-xs"}),s.role]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-full border ${s.verified?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200"}`,children:[s.verified?e.jsx(g,{}):e.jsx(S,{}),s.verified?"Verified":"Pending"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(u,{className:"text-gray-400"}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.role==="student"&&e.jsx("button",{onClick:()=>x(s.id,"admin",s.name,s.email),disabled:t===`role-${s.id}`,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:t===`role-${s.id}`?e.jsx(p,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(U,{})," Promote"]})}),s.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(s.id,"student",s.name,s.email),disabled:t===`role-${s.id}`,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 hover:bg-green-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:t===`role-${s.id}`?e.jsx(p,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(A,{})," Demote"]})}),e.jsx("button",{onClick:()=>$(s.id,s.name),disabled:t===`delete-${s.id}`,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:t===`delete-${s.id}`?e.jsx(p,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(P,{})," Delete"]})})]}),s.role==="instructor"&&e.jsx("span",{className:"text-gray-400 text-xs italic px-3 py-1.5",children:"No actions"})]})})]},s.id))})]})}),e.jsx("div",{className:"lg:hidden space-y-4 p-4",children:m.map(s=>e.jsx(y,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-gray-200",children:e.jsxs(N,{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-full flex items-center justify-center text-white font-bold text-lg sm:text-xl shadow-lg ${s.role==="admin"?"bg-gradient-to-br from-red-500 to-red-600":s.role==="instructor"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-green-500 to-green-600"}`,children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-base sm:text-lg mb-1",children:s.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate mb-2",children:s.email}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 text-xs font-bold rounded-full border ${k(s.role)}`,children:[s.role==="admin"&&e.jsx(f,{className:"text-xs"}),s.role==="instructor"&&e.jsx(h,{className:"text-xs"}),s.role==="student"&&e.jsx(j,{className:"text-xs"}),s.role]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 text-xs font-semibold rounded-full border ${s.verified?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200"}`,children:[s.verified?e.jsx(g,{}):e.jsx(S,{}),s.verified?"Verified":"Pending"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 text-xs sm:text-sm mb-4 pb-2 border-b border-gray-200",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Joined:"}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-700",children:[e.jsx(u,{className:"text-gray-400"}),e.jsx("span",{className:"text-xs",children:new Date(s.created_at).toLocaleDateString()})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.role==="student"&&e.jsx("button",{onClick:()=>x(s.id,"admin",s.name,s.email),disabled:t===`role-${s.id}`,className:"flex items-center gap-1.5 px-3 py-2 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:t===`role-${s.id}`?"...":e.jsxs(e.Fragment,{children:[e.jsx(U,{})," Promote to Admin"]})}),s.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(s.id,"student",s.name,s.email),disabled:t===`role-${s.id}`,className:"flex items-center gap-1.5 px-3 py-2 bg-green-100 text-green-700 hover:bg-green-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:t===`role-${s.id}`?"...":e.jsxs(e.Fragment,{children:[e.jsx(A,{})," Demote"]})}),e.jsx("button",{onClick:()=>$(s.id,s.name),disabled:t===`delete-${s.id}`,className:"flex items-center gap-1.5 px-3 py-2 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:t===`delete-${s.id}`?"...":e.jsxs(e.Fragment,{children:[e.jsx(P,{})," Delete"]})})]}),s.role==="instructor"&&e.jsx("span",{className:"text-gray-400 italic text-xs px-3 py-2",children:"No actions available"})]})]})},s.id))})]})})]})]}),e.jsx(q,{}),e.jsx(I,{isOpen:d.isOpen,onClose:()=>C({...d,isOpen:!1}),type:d.type,title:d.title,children:d.message})]})}export{X as default};
