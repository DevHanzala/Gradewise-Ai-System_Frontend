import{u as F,r as c,j as e,N as p,L as k,g,C as f,s as h,b,M as B,P as r}from"./index-BE97Blc-.js";import{u as A}from"./resourceStore-CzSNu-NW.js";function _(){const y=F(),{resources:i,loading:j,fetchResources:l,uploadResources:x,deleteResource:N,clearCurrentResource:u}=A(),[n,v]=c.useState({isOpen:!1,type:"info",title:"",message:""}),[m,o]=c.useState(!1);c.useEffect(()=>(l(),()=>u()),[l,u]);const w=async s=>{const t=Array.from(s.target.files);if(t.length===0){r.error("No files selected.");return}try{await x(t),r.success(`${t.length} resource(s) uploaded and chunked successfully.`),l()}catch(a){r.error(a.message||"Failed to upload resources.")}},d=s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?o(!0):s.type==="dragleave"&&o(!1)},D=async s=>{s.preventDefault(),s.stopPropagation(),o(!1);const t=Array.from(s.dataTransfer.files);if(t.length!==0)try{await x(t),r.success(`${t.length} resource(s) uploaded and chunked successfully.`),l()}catch(a){r.error(a.message||"Failed to upload resources.")}},C=async s=>{if(window.confirm("Are you sure you want to delete this resource?"))try{await N(s),r.success("Resource deleted successfully."),l()}catch(t){r.error(t.message||"Failed to delete resource.")}},R=s=>{if(!s)return"N/A";const t=["Bytes","KB","MB","GB"];if(s===0)return"0 Byte";const a=parseInt(Math.floor(Math.log(s)/Math.log(1024)));return Math.round(s/Math.pow(1024,a),2)+" "+t[a]},M=s=>{const t=s?.toLowerCase()||"";return t.includes("pdf")?"ðŸ“•":t.includes("doc")?"ðŸ“˜":t.includes("ppt")||t.includes("presentation")?"ðŸ“™":t.includes("txt")||t.includes("text")?"ðŸ“„":t.includes("image")||t.includes("jpg")||t.includes("png")?"ðŸ–¼ï¸":"ðŸ“"},P=s=>{const t=s?.toLowerCase()||"";return t.includes("pdf")?"bg-red-100 text-red-700":t.includes("doc")?"bg-blue-100 text-blue-700":t.includes("ppt")?"bg-orange-100 text-orange-700":t.includes("txt")?"bg-gray-100 text-gray-700":t.includes("image")?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"};return j?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(p,{}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(k,{type:"dots",color:"blue"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading resources..."})]}),e.jsx(g,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(p,{}),e.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Manage Resources"}),e.jsx("p",{className:"text-gray-600",children:"Upload and organize your educational materials"})]}),e.jsx("button",{onClick:()=>y("/instructor/assessments"),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-white hover:border-gray-400 transition-all duration-200 font-medium shadow-sm",children:"â† Back to Assessments"})]}),e.jsxs(f,{className:"mb-8 shadow-md border-0",children:[e.jsx(h,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-lg",children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“¤"}),e.jsx("span",{children:"Upload New Resources"})]})}),e.jsx(b,{className:"p-6 sm:p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{onDragEnter:d,onDragLeave:d,onDragOver:d,onDrop:D,className:`relative border-3 border-dashed rounded-xl p-8 sm:p-12 text-center transition-all duration-300 ${m?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50"}`,children:[e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.ppt,.pptx,.jpg,.jpeg,.png,.webp",onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"file-upload"}),e.jsxs("div",{className:"pointer-events-none",children:[e.jsx("div",{className:"text-6xl mb-4",children:"â˜ï¸"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:m?"Drop files here":"Drag and drop files here"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"or click to browse"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold cursor-pointer shadow-md hover:shadow-lg pointer-events-auto",children:"Choose Files"})]})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"text-2xl flex-shrink-0",children:"â„¹ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Supported Formats"}),e.jsx("p",{className:"text-sm text-blue-800",children:"PDF, DOC, DOCX, TXT, PPT, PPTX, JPG, JPEG, PNG, WEBP (Max: 10MB each)"}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"ðŸ“Š PDFs will be automatically chunked for efficient storage and retrieval"})]})]})})]})})]}),e.jsxs(f,{className:"shadow-md border-0",children:[e.jsx(h,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“š"}),e.jsx("span",{children:"Existing Resources"})]}),e.jsxs("span",{className:"bg-white bg-opacity-20 backdrop-blur-sm px-4 py-1.5 rounded-full text-sm font-bold",children:[i.length," ",i.length===1?"Resource":"Resources"]})]})}),e.jsx(b,{className:"p-6 sm:p-8",children:i.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-7xl mb-6",children:"ðŸ“‚"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No resources yet"}),e.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Upload your first resource to start building your library for assessments"})]}):e.jsx("div",{className:"space-y-3",children:i.map(s=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-5 border-2 border-gray-200 rounded-xl hover:border-blue-300 hover:shadow-md transition-all duration-200 bg-white gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0 text-2xl",children:M(s.file_type||s.content_type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate mb-1.5",children:s.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`text-xs font-semibold px-2.5 py-1 rounded-full ${P(s.file_type||s.content_type)}`,children:(s.file_type||s.content_type)?.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2.5 py-1 rounded-full font-medium",children:R(s.file_size)})]})]})]}),e.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:e.jsxs("button",{onClick:()=>C(s.id),className:"flex-1 sm:flex-initial px-5 py-2.5 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors duration-200 font-semibold text-sm flex items-center justify-center gap-2",children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{children:"Delete"})]})})]},s.id))})})]})]}),e.jsx(g,{}),e.jsx(B,{isOpen:n.isOpen,onClose:()=>v({...n,isOpen:!1}),type:n.type,title:n.title,children:n.message})]})}export{_ as default};
