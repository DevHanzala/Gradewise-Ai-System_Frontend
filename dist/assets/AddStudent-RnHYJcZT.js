import{u as M,a as D,r as m,j as e,t as I,c as F,F as E,f as g,L as P,W as A,B as z,N as U,g as B,M as O,P as G}from"./index-BE97Blc-.js";import{u as J}from"./assessmentStore-CWi3OlGP.js";function H({assessmentId:n,onStudentAdded:f,compact:u=!1}){const x=M(),{enrollStudent:b,loading:j}=J(),{registerStudent:q}=D(),[p,y]=m.useState(n?"enroll":"register"),[s,h]=m.useState({name:"",email:"",password:"",confirmPassword:""}),[v,N]=m.useState(!1),[t,c]=m.useState({isOpen:!1,type:"",title:"",message:""}),i=r=>{h(l=>({...l,[r.target.name]:r.target.value}))},a=(r,l,C,k=!1)=>{c({isOpen:!0,type:r,title:l,message:C}),G[r==="success"?"success":"error"](C),r==="success"&&k&&setTimeout(()=>{c({isOpen:!1}),x("/instructor/dashboard")},1500)},w=()=>{h({name:"",email:"",password:"",confirmPassword:""})},L=async r=>{if(r.preventDefault(),!s.name.trim()){a("error","Invalid Input","Full name is required");return}if(!s.email.trim()){a("error","Invalid Input","Email is required");return}if(s.password.length<6){a("error","Invalid Input","Password must be at least 6 characters");return}if(s.password!==s.confirmPassword){a("error","Invalid Input","Passwords do not match");return}N(!0);try{await q({name:s.name.trim(),email:s.email.trim(),password:s.password}),n?(await b(n,s.email.trim()),f?.(),w(),a("success","Success","Student registered and enrolled successfully!")):(w(),a("success","Success","Student registered successfully!",!0))}catch(l){a("error","Error",l.message||"Registration failed")}finally{N(!1)}},R=async r=>{if(r.preventDefault(),!s.email.trim()){a("error","Error","Email is required");return}try{await b(n,s.email.trim()),a("success","Success","Student enrolled successfully!"),h(l=>({...l,email:""})),f?.()}catch(l){a("error","Error",l.message||"Enrollment failed")}},o="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-4 focus:ring-blue-200 focus:border-blue-500 transition-all",d="block text-sm font-bold text-gray-700 mb-2",S=p==="register"?e.jsxs("form",{onSubmit:L,className:u?"space-y-4":"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{className:"text-gray-400"})}),e.jsx("input",{name:"name",value:s.name,onChange:i,required:!0,className:o,placeholder:"John Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:"text-gray-400"})}),e.jsx("input",{name:"email",type:"email",value:s.email,onChange:i,required:!0,className:o,placeholder:"student@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"text-gray-400"})}),e.jsx("input",{name:"password",type:"password",value:s.password,onChange:i,required:!0,className:o,placeholder:"Min. 6 characters"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"text-gray-400"})}),e.jsx("input",{name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:i,required:!0,className:o,placeholder:"Confirm password"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsxs("button",{type:"button",onClick:()=>x(-1),className:"inline-flex items-center justify-center gap-2 px-6 py-3 text-gray-700 bg-white border-2 border-gray-300 rounded-xl font-bold hover:bg-gray-50 hover:border-gray-400 transition-all",children:[e.jsx(g,{}),"Cancel"]}),e.jsx("button",{type:"submit",disabled:v,className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-bold disabled:opacity-50 hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg",children:v?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"sm",color:"white",type:"dots"}),e.jsx("span",{children:"Registering..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{}),e.jsx("span",{children:"Register Student"})]})})]})]}):e.jsxs("form",{onSubmit:R,className:u?"space-y-4":"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Student Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:"text-gray-400"})}),e.jsx("input",{name:"email",type:"email",value:s.email,onChange:i,required:!0,className:o,placeholder:"student@example.com"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4",children:[e.jsxs("button",{type:"button",onClick:()=>x(-1),className:"inline-flex items-center justify-center gap-2 px-6 py-3 text-gray-700 bg-white border-2 border-gray-300 rounded-xl font-bold hover:bg-gray-50 hover:border-gray-400 transition-all",children:[e.jsx(g,{}),"Cancel"]}),e.jsx("button",{type:"submit",disabled:j,className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-bold disabled:opacity-50 hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:j?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"sm",color:"white",type:"dots"}),e.jsx("span",{children:"Enrolling..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{}),e.jsx("span",{children:"Enroll Student"})]})})]})]});return u?e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"mb-4 -mt-2",children:e.jsx("button",{onClick:()=>y(r=>r==="enroll"?"register":"enroll"),className:"text-xs text-blue-600 hover:text-blue-700 font-semibold hover:underline transition-colors",children:p==="enroll"?"→ Register new student instead":"→ Enroll existing instead"})}),S,e.jsx(O,{isOpen:t.isOpen,onClose:()=>c({...t,isOpen:!1}),type:t.type,title:t.title,children:t.message})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30",children:[e.jsx(U,{}),e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 sm:py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Add New Student"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Register a new student or enroll an existing one"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border-2 border-gray-200 p-6 sm:p-8",children:[e.jsx("div",{className:"mb-6 pb-6 border-b-2 border-gray-200",children:e.jsxs("button",{onClick:()=>y(r=>r==="register"?"enroll":"register"),className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-bold hover:underline transition-colors",children:[e.jsx(g,{}),"Switch to ",p==="register"?"enroll existing":"register new"]})}),S]})]}),e.jsx(B,{}),e.jsx(O,{isOpen:t.isOpen,onClose:()=>c({...t,isOpen:!1}),type:t.type,title:t.title,children:t.message})]})}export{H as default};
